# maniac_q

## Описание
Компьютерная программа с консольным интерфейсом, включающая в себя движок для просчитывания лучших ходов в игре Quoridor. Для работы программы используется алгоритм MiniMax.

Имеет три возможных режима работы:

1. Игра с ботом, работающим на движке. Бот работает, получая от движка лучший ход и играя его. Сценарий применения - использование в развлекательных целях, а также для тренировки.

  ```maniac_q --play [--fromFile <path>] --player <playerId>```

2. Режим утилиты - считывает расстановку из файла и выдаёт рекомендацию наилучшего хода. Параметр "из файла" не является обязательным, однако в таком случае предполагается стартовая расстановка и рекомендация тривиальна.

  ```maniac_q --engine [--fromFile <path>] --player <playerId>```

3. Интерактивный режим - делает рекомендации на ходе игрока, однако позволяет ему сходить самостоятельно. Сценарий применения - советник при игре с соперником.

  ```maniac_q --interactive [--fromFile <path>] --player <playerId>```



 - `playerId` - число от 1 до 2, обозначающее чётность хода (т.е. игрок 1 ходит первым)

 - `--fromFile` - десериализация состояния из Forsyth–Edwards-like нотации.

 - `path` - путь к файлу, содержащему Forsyth–Edwards-like нотацию для десериализации состояния.

## Как запускать
 - установить cmake и gcc
 - склонировать репозиторий
 - собрать исполняемый файл скриптом `build.sh`
 - запустить исполняемый файл `maniac_q` в директории `build`
 
 ## Как пользоваться
 По умолчанию при запуске утилиты без аргументов начинается новая игра в режиме `play`, пользователь ходит первым. 
 
 Если пользователь хочет получать советы движка по ходу игры, то следует запускать утилиту в режиме `--intercative`, для однократного получения совета по текущему положению фишек на игровом поле утилиту следует запускать в режиме `--engine`.
 

Интерфейс утилиты выглядит следующим образом - после каждого ходя выводится ASCII репрезентация игрового поля. Если ход бота, то утилита выведет его ход сразу же, как столько найдет наилучший из возможных на определенной глубине поиска по дереву все возмжных ходов. Если ход пользователя, то программа выдаст приглашение на ввод хода. Ходы вводятся в утилиту с помощью Forsyth–Edwards-like нотации. Например, ниже показан ход пользователя из клетки `e1` в клетку `e2`. Если пользователь введет некорректный или невозможный ход, то утилита выведет на экран предупреждение и попросит пользователя заново ввести свой ход.
 
 ```
$ ./maniac_q 
Введите ваш ход: 
e2
--  a   b   c   d   e   f   g   h   i  
--+-----------------------------------+
1-|                                   |
--|   +   +   +   +   +   +   +   +   |
2-|                 X                 |
--|   +   +   +   +   +   +   +   +   |
3-|                                   |
--|   +   +   +   +   +   +   +   +   |
4-|                                   |
--|   +   +   +   +   +   +   +   +   |
5-|                                   |
--|   +   +   +   +   +   +   +   +   |
6-|                                   |
--|   +   +   +   +   +   +   +   +   |
7-|                                   |
--|   +   +   +   +   +   +   +   +   |
8-|                                   |
--|   +   +   +   +   +   +   +   +   |
9-|                 O                 |
--+-----------------------------------+
Ход игрока: 2
Количество досок у игрока 1: 10
Количество досок у игрока 2: 10
 ```
 
 Расстановка стенок производится только в свой ход с помощью все той же нForsyth–Edwards-like нотации. Чтобы поставить горизонтальный забор, находящийся между клеток `a1 b1 a2 b2`, необходимо ввести нотацию `a1h` - координату левого верхнего квадрата и букву `h` - ориентацию стенки. Если такую стенку поставить невозможно, то утилита выведет предупреждение и попросит заново ввести ход.
 
 ```
 Введите ваш ход: 
a1h
--  a   b   c   d   e   f   g   h   i  
--+-----------------------------------+
1-|                                   |
--|---+---+   +   +   +   +   +   +   |
2-|                 X                 |
--|   +   +   +   +   +   +   +   +   |
3-|                                   |
--|   +   +   +   +   +   +   +   +   |
4-|                                   |
--|   +   +   +   +   +   +   +   +   |
5-|                                   |
--|   +   +   +   +   +   +   +   +   |
6-|                                   |
--|   +   +   +   +   +   +   +   +   |
7-|                                   |
--|   +   +   +   +   +   +   +   +   |
8-|                 O                 |
--|   +   +   +   +   +   +   +   +   |
9-|                                   |
--+-----------------------------------+
Ход игрока: 2
Количество досок у игрока 1: 9
Количество досок у игрока 2: 10
Бот сделал ход: e7
--  a   b   c   d   e   f   g   h   i  
--+-----------------------------------+
1-|                                   |
--|---+---+   +   +   +   +   +   +   |
2-|                 X                 |
--|   +   +   +   +   +   +   +   +   |
3-|                                   |
--|   +   +   +   +   +   +   +   +   |
4-|                                   |
--|   +   +   +   +   +   +   +   +   |
5-|                                   |
--|   +   +   +   +   +   +   +   +   |
6-|                                   |
--|   +   +   +   +   +   +   +   +   |
7-|                 O                 |
--|   +   +   +   +   +   +   +   +   |
8-|                                   |
--|   +   +   +   +   +   +   +   +   |
9-|                                   |
--+-----------------------------------+
Ход игрока: 1
Количество досок у игрока 1: 9
Количество досок у игрока 2: 10
```

Аналогично можно расположить вертикальную стенку с помощью нотации `b2v`:

```
Введите ваш ход: 
b2v
--a   b   c   d   e   f   g   h   i  
--+-----------------------------------+
1-|                                   |
--|---+---+   +   +   +   +   +   +   |
2-|       |         X                 |
--|   +   +   +   +   +   +   +   +   |
3-|       |                           |
--|   +   +   +   +   +   +   +   +   |
4-|                                   |
--|   +   +   +   +   +   +   +   +   |
5-|                                   |
--|   +   +   +   +   +   +   +   +   |
6-|                                   |
--|   +   +   +   +   +   +   +   +   |
7-|                 O                 |
--|   +   +   +   +   +   +   +   +   |
8-|                                   |
--|   +   +   +   +   +   +   +   +   |
9-|                                   |
--+-----------------------------------+
Ход игрока: 2
Количество досок у игрока 1: 8
Количество досок у игрока 2: 10
```
